<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS | T.K. Industries</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;600&display=swap');

        :root {
            --accent: #00d2ff;
            --accent-glow: rgba(0, 210, 255, 0.7);
            --bg-dark: #020204;
            --panel-bg: rgba(10, 11, 16, 0.95);
            --border: rgba(0, 210, 255, 0.2);
        }

        body {
            margin: 0; background: var(--bg-dark); color: #fff;
            font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden;
        }

        /* üîê GATEKEEPER */
        #gatekeeper {
            position: fixed; inset: 0; background: #000;
            z-index: 10000; display: flex; align-items: center; justify-content: center;
        }
        .gate-card {
            background: #050508; padding: 40px; border: 1px solid var(--accent);
            text-align: center; box-shadow: 0 0 40px rgba(0, 210, 255, 0.1);
        }
        .gate-input {
            background: #000; border: 1px solid var(--accent); color: var(--accent); padding: 15px;
            font-family: 'Orbitron'; text-align: center; font-size: 20px; width: 250px; outline: none; margin: 20px 0;
        }

        /* UI ELEMENTS */
        .top-nav { height: 60px; background: #000; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 40px; }
        .logo { font-family: 'Orbitron'; color: var(--accent); font-weight: 900; letter-spacing: 4px; font-size: 14px; }
        
        .studio-core { display: grid; grid-template-columns: 350px 1fr; height: calc(100vh - 110px); }
        
        .sidebar { background: #08090d; border-right: 1px solid var(--border); padding: 20px; overflow-y: auto; }
        .preview-area { background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }

        /* NEON VOLUME */
        #volLevel { font-family: 'Orbitron'; font-weight: 900; color: var(--accent); transition: 0.3s; }
        
        /* SECURITY LOG */
        .security-log {
            position: absolute; bottom: 20px; left: 20px; width: 280px; height: 100px;
            background: rgba(0,0,0,0.8); border-left: 2px solid var(--accent);
            font-family: 'Orbitron'; font-size: 8px; color: var(--accent); padding: 10px;
            overflow-y: hidden; line-height: 1.5; pointer-events: none;
        }

        .btn-gen { background: var(--accent); color: #000; border: none; font-family: 'Orbitron'; font-weight: 900; padding: 15px; cursor: pointer; width: 100%; margin-top: 10px; }
        textarea, input[type="text"] { width: 100%; background: #000; border: 1px solid var(--border); color: #fff; padding: 10px; margin: 5px 0; box-sizing: border-box; }
        label { font-family: 'Orbitron'; font-size: 9px; color: var(--accent); opacity: 0.8; margin-top: 15px; display: block; }
        
        #mainImg { max-width: 90%; max-height: 70vh; box-shadow: 0 0 50px rgba(0,0,0,1); display: none; }
        #dlBtn { display: none; background: transparent; border: 1px solid var(--accent); color: var(--accent); font-family: 'Orbitron'; padding: 10px 20px; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>

    <audio id="bgAudio" loop src="ambient.wav"></audio>

    <div id="gatekeeper">
        <div class="gate-card">
            <div class="logo" style="margin-bottom:10px;">NEXUS SYSTEM</div>
            <div style="font-size:8px; color:var(--accent); opacity:0.5; letter-spacing:2px;">T.K. INDUSTRIES SECURITY HUB</div>
            <input type="password" id="passInput" class="gate-input" placeholder="PASSKEY" autofocus>
            <button class="btn-gen" onclick="unlock()">AUTHORIZE ACCESS</button>
        </div>
    </div>

    <header class="top-nav">
        <div class="logo">NEXUS <span style="font-size:8px; font-weight:300; opacity:0.5;">BY T.K. INDUSTRIES</span></div>
        <div style="display:flex; align-items:center; gap:20px;">
            <div style="font-family:Orbitron; font-size:10px; color:var(--accent);">VOL: <span id="volLevel">5</span></div>
            <input type="range" min="0" max="1" step="0.05" value="0.25" oninput="updateVolume(this.value)" style="width:80px; accent-color:var(--accent);">
            <button onclick="toggleSettings()" style="background:none; border:none; cursor:pointer; font-size:18px;">‚öôÔ∏è</button>
        </div>
    </header>

    <div id="settingsBox" style="display:none; position:fixed; top:70px; right:20px; background:#0a0b10; border:1px solid var(--accent); padding:20px; z-index:5000; width:300px;">
        <label>NEURAL UPLINK (GRADIO URL)</label>
        <input type="text" id="urlInput" placeholder="https://....gradio.live">
        <button class="btn-gen" onclick="saveURL()">SAVE CONFIG</button>
    </div>

    <main class="studio-core">
        <div class="sidebar">
            <label>VISION PROMPT</label>
            <textarea id="promptIn" rows="5" placeholder="Enter descriptors..."></textarea>
            
            <label>NEGATIVE ARCHITECTURE</label>
            <input type="text" id="negPrompt" placeholder="blur, text, low quality...">
            
            <button class="btn-gen" onclick="generate()">EXECUTE SYNTHESIS</button>
            
            <label>SESSION LOGS</label>
            <div id="sidebarLog" style="font-size:7px; color:#555; font-family:Orbitron; margin-top:10px; line-height:1.8;"></div>
        </div>

        <div class="preview-area">
            <div id="placeholder" style="font-family:Orbitron; opacity:0.1; letter-spacing:10px;">SYSTEM IDLE</div>
            <img id="mainImg" src="">
            <button id="dlBtn" onclick="downloadImg()">üíæ SAVE ARTIFACT</button>
            
            <div id="secLog" class="security-log">
                <div>> INITIALIZING...</div>
                <div>> STANDBY FOR AUTHENTICATION</div>
            </div>
        </div>
    </main>

    <footer style="position:fixed; bottom:0; width:100%; height:50px; background:#000; border-top:1px solid var(--border); display:flex; align-items:center; padding:0 40px; justify-content:space-between;">
        <div style="font-family:Orbitron; font-size:8px; color:var(--accent); letter-spacing:1px;">
            UPLINK: <span id="statusTag">DISCONNECTED</span> // ENCRYPTION: AES-256
        </div>
        <div style="opacity:0.2; font-size:7px; font-family:Orbitron;">¬© 2026 T.K. INDUSTRIES</div>
    </footer>

    <script>
        // --- ADMIN BYPASS CONFIG ---
        const DEFAULT_UPLINK = "https://ca52b0ad1763dbfd61.gradio.live"; 
        // ---------------------------

        let FORGE_URL = localStorage.getItem('nexus_url') || DEFAULT_UPLINK || "";
        const MASTER_KEY = "NEXUS77";

        function addLog(msg) {
            const log = document.getElementById('secLog');
            const entry = document.createElement('div');
            entry.innerText = `> ${new Date().toLocaleTimeString()}: ${msg}`;
            log.prepend(entry);
            
            const side = document.getElementById('sidebarLog');
            const sEntry = document.createElement('div');
            sEntry.innerText = `[${new Date().toLocaleTimeString()}] ${msg}`;
            side.prepend(sEntry);
        }

        function unlock() {
            const pass = document.getElementById('passInput').value.toUpperCase();
            if (pass === MASTER_KEY) {
                document.getElementById('gatekeeper').style.display = 'none';
                const audio = document.getElementById('bgAudio');
                audio.play().catch(e => console.log("Audio needs interaction"));
                addLog("ACCESS GRANTED: WELCOME ADMIN");
                
                if(FORGE_URL && FORGE_URL !== "https://ca52b0ad1763dbfd61.gradio.live") {
                    document.getElementById('statusTag').innerText = "STABLE";
                    document.getElementById('statusTag').style.color = "#00ff88";
                    addLog("NEURAL BRIDGE ESTABLISHED");
                }
            } else {
                alert("INVALID PASSKEY");
            }
        }

        function updateVolume(val) {
            const audio = document.getElementById('bgAudio');
            audio.volume = val;
            const level = Math.round(val * 20);
            const disp = document.getElementById('volLevel');
            disp.innerText = level;
            disp.style.textShadow = `0 0 ${level * 2}px var(--accent), 0 0 ${level}px #fff`;
        }

        function toggleSettings() {
            const s = document.getElementById('settingsBox');
            s.style.display = s.style.display === 'none' ? 'block' : 'none';
            document.getElementById('urlInput').value = FORGE_URL;
        }

        function saveURL() {
            FORGE_URL = document.getElementById('urlInput').value;
            localStorage.setItem('nexus_url', FORGE_URL);
            addLog("UPLINK ADDR UPDATED");
            document.getElementById('statusTag').innerText = "STABLE";
            document.getElementById('statusTag').style.color = "#00ff88";
            toggleSettings();
        }

        async function generate() {
            if(!FORGE_URL || FORGE_URL === "https://ca52b0ad1763dbfd61.gradio.live") return alert("Uplink missing. Set Gradio URL in Settings Gear.");
            addLog("INITIATING NEURAL SYNTHESIS...");
            document.getElementById('placeholder').innerText = "SYNTHESIZING...";
            
            try {
                const res = await fetch(`${FORGE_URL}/sdapi/v1/txt2img`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        "prompt": document.getElementById('promptIn').value,
                        "negative_prompt": document.getElementById('negPrompt').value,
                        "steps": 20
                    })
                });
                const data = await res.json();
                if(data.images) {
                    const img = document.getElementById('mainImg');
                    img.src = "data:image/png;base64," + data.images[0];
                    img.style.display = "block";
                    document.getElementById('placeholder').style.display = "none";
                    document.getElementById('dlBtn').style.display = "block";
                    addLog("ARTIFACT GENERATED SUCCESSFULLY");
                }
            } catch(e) {
                addLog("ERROR: UPLINK TIMEOUT");
                alert("Gradio Link is expired or inactive.");
            }
        }

        function downloadImg() {
            const a = document.createElement('a');
            a.href = document.getElementById('mainImg').src;
            a.download = `nexus_${Date.now()}.png`;
            a.click();
            addLog("ARTIFACT SAVED TO DISK");
        }

        document.getElementById('passInput').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') unlock();
        });
    </script>
</body>
</html>


